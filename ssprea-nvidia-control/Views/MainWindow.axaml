<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:ssprea_nvidia_control.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:models="clr-namespace:ssprea_nvidia_control.Models"
        mc:Ignorable="d" d:DesignWidth="1514" d:DesignHeight="787"
        Width="1514" Height="787"
        xmlns:lvc="using:LiveChartsCore.SkiaSharpView.Avalonia"
        xmlns:liveChartsCore="clr-namespace:LiveChartsCore;assembly=LiveChartsCore"
        xmlns:skiaSharpView="clr-namespace:LiveChartsCore.SkiaSharpView;assembly=LiveChartsCore.SkiaSharpView"
        x:Class="ssprea_nvidia_control.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="ssprea NVidia Control"
        Name="MainOcWindow"
        Closed="Window_OnClosed"
        TransparencyLevelHint="AcrylicBlur, Blur, Transparent"
        Background="Transparent"
        >
        
    <Design.DataContext>
        <!-- This only sets the DataContext for the previewer in an IDE,    
             to set the actual DataContext for runtime, set the DataContext property in code (look at App.axaml.cs) -->
        <vm:MainWindowViewModel/>
    </Design.DataContext>


    <Grid x:Name="MainGrid"
              ColumnDefinitions="*,20*,2*"
              RowDefinitions="*,10*,8*,*"
              x:DataType="vm:MainWindowViewModel"
              Background="{DynamicResource BackgroundBrush}"
              
              
              
        >
            
            <Grid.Resources>
        <ResourceDictionary>
            <ResourceDictionary.ThemeDictionaries>
                <ResourceDictionary x:Key='Light'>
                    <SolidColorBrush x:Key='BackgroundBrush'>GhostWhite</SolidColorBrush>
                    <SolidColorBrush x:Key='BorderBrush'>DimGray</SolidColorBrush>
                    <SolidColorBrush x:Key='ForegroundBrush'>Black</SolidColorBrush>
                    <SolidColorBrush x:Key='SectionBackgroundBrush'>LightGray</SolidColorBrush>
                    <SolidColorBrush x:Key='SelectionColor'>#C191FF</SolidColorBrush>
                    <SolidColorBrush x:Key='TextColor'>Black</SolidColorBrush>
                </ResourceDictionary>
                <ResourceDictionary x:Key='Dark'>
                    <SolidColorBrush x:Key='BackgroundBrush'>#AA262626</SolidColorBrush>
                    <SolidColorBrush x:Key='BorderBrush'>#1e1f22</SolidColorBrush>
                    <SolidColorBrush x:Key='ForegroundBrush'>#8b8d92</SolidColorBrush>
                    <SolidColorBrush x:Key='SmallSectionBackgroundBrushLight'>#DD606060</SolidColorBrush>
                    <SolidColorBrush x:Key='SmallSectionBackgroundBrushDark'>#DD404848</SolidColorBrush>
                    <SolidColorBrush x:Key='SectionBackgroundBrushLight'>#AA606060</SolidColorBrush>
                    <SolidColorBrush x:Key='SectionBackgroundBrushDark'>#AA404848</SolidColorBrush>
                    <SolidColorBrush x:Key='InfoBarsBorderBrush'>Transparent</SolidColorBrush>
                    <SolidColorBrush x:Key='HighlightColor'>DodgerBlue</SolidColorBrush>
                    <!-- <LinearGradientBrush x:Key='ProgressBarGradient' StartPoint="0%,0%" EndPoint="100%,0%"> -->
                    <!--     <GradientStop Color="#904ECDC4" Offset="0.0"/> -->
                    <!--     <GradientStop Color="#90FF6B6B" Offset="1.0"/> -->
                    <!-- </LinearGradientBrush> -->
                    <Color x:Key='SectionBackgroundColorLight'>#AA606060</Color>
                    <Color x:Key='SectionBackgroundColorDark'>#AA404848</Color>
                    <SolidColorBrush x:Key='SelectionColor'>#C191FF</SolidColorBrush>
                    <SolidColorBrush x:Key='TextColor'>#BDBDBD</SolidColorBrush>
                </ResourceDictionary>
            </ResourceDictionary.ThemeDictionaries>
        </ResourceDictionary>
    </Grid.Resources>
    
        <Grid.Styles>
            
            
            <!-- <Style Selector="Grid#MainGrid"> -->
            <!--     <Setter Property="Background" Value="{DynamicResource BackgroundBrush}" /> -->
            <!--     <Setter Property="TextElement.Foreground" Value="{DynamicResource ForegroundBrush}" /> -->
            <!-- </Style> -->
            
            <!-- <Style Selector="Slider"> -->
            <!--     <Setter Property="Foreground" Value="{DynamicResource HighlightColor}" /> -->
            <!-- </Style> -->
            
            <Style Selector="ProgressBar">
                <Setter Property="CornerRadius" Value="12" />
                <Setter Property="Foreground" Value="{DynamicResource HighlightColor}" />
            </Style>
            
            <Style Selector="Button">
                <Setter Property="CornerRadius" Value="12" />
            </Style>
        
        
        </Grid.Styles>
        
            <!-- <Border Grid.Row="1" Grid.Column="2" Grid.RowSpan="2"  -->
            <!--              -->
            <!--         BorderThickness="5" -->
            <!--          -->
            <!-- > -->
            <!--          -->
            <!--      -->
            <!--          -->
            <!-- </Border> -->
            
            <!--MAIN-->
            <Border Grid.Column="1" Grid.Row="1" BorderThickness="2">
                
                <Grid ColumnDefinitions="*,13*,*,4*,*" 
                  RowDefinitions="*,*,*,*,*,*,*"
                   
                  
                  >
                
                    <Border Grid.Column="1" Grid.RowSpan="5"
                            Grid.Row="1" BorderBrush="Gray" BorderThickness="2" Padding="8" CornerRadius="10" Background="{DynamicResource SectionBackgroundBrushDark}"
                            >
                        
                        <Grid RowDefinitions="*,*,*,*,*,*"
                              ColumnDefinitions="2*,11*,*,*,*"
                              
                              >
                    
                            <!--GPU CLOCK-->
                            <Label Grid.Column="0" Grid.Row="0" VerticalAlignment="Center" FontSize="12" HorizontalAlignment="Right"> CORE CLCK </Label>
                                    
                            <Border Grid.Column="1" Grid.Row="0" BorderBrush="{DynamicResource InfoBarsBorderBrush}" BorderThickness="2" Padding="3">
                                <ProgressBar Minimum="0" Maximum="3000" Value="{Binding SelectedGpu.GpuClockCurrent, FallbackValue=0}"  VerticalAlignment="Stretch" />
                            </Border>
                            <Border Grid.Column="2" Grid.Row="0" BorderBrush="{DynamicResource InfoBarsBorderBrush}" BorderThickness="2">
                                <Label  VerticalAlignment="Center" HorizontalAlignment="Right" FontWeight="Bold" Content="{Binding SelectedGpu.GpuClockCurrent, FallbackValue=0000}" /> 
                            </Border>
                            <Label Grid.Column="3" Grid.Row="0" VerticalAlignment="Center" HorizontalAlignment="Left"> MHz </Label>
                            
                            <!--MEM CLOCK-->
                            <Label Grid.Column="0" Grid.Row="1" VerticalAlignment="Center" FontSize="12" HorizontalAlignment="Right"> MEM CLCK </Label>
                            <Border Grid.Column="1" Grid.Row="1" BorderBrush="{DynamicResource InfoBarsBorderBrush}" BorderThickness="2" Padding="3">
                                <ProgressBar Minimum="0" Maximum="10000" Value="{Binding SelectedGpu.MemClockCurrent, FallbackValue=0}"  VerticalAlignment="Stretch" />
                            </Border>
                            
                            <Border Grid.Column="2" Grid.Row="1" BorderBrush="{DynamicResource InfoBarsBorderBrush}" BorderThickness="2">
                                <Label  VerticalAlignment="Center" HorizontalAlignment="Right" Content="{Binding SelectedGpu.MemClockCurrent, FallbackValue=0000}"/>
                            </Border>
                            
                            <Label Grid.Column="3" Grid.Row="1" VerticalAlignment="Center"> MHz </Label>
                            
                            <!--MEM USE-->
                            <Label Grid.Column="0" Grid.Row="2" VerticalAlignment="Center" FontSize="12" HorizontalAlignment="Right"> MEM USE </Label>
                            
                            <Border Grid.Column="1" Grid.Row="2"  BorderBrush="{DynamicResource InfoBarsBorderBrush}" BorderThickness="2" Padding="3">
                                <ProgressBar  VerticalAlignment="Stretch" Value="{Binding SelectedGpu.MemoryUsed, FallbackValue=0}" Minimum="0" Maximum="{Binding SelectedGpu.MemoryTotal,FallbackValue=1000000}"/>
                                
                            </Border>
                            <Border Grid.Column="2" Grid.Row="2" BorderBrush="{DynamicResource InfoBarsBorderBrush}" BorderThickness="2">
                            
                                <Label  VerticalAlignment="Center" HorizontalAlignment="Right" Content="{Binding SelectedGpu.MemoryUsedMBFormatted, FallbackValue=00000}"/>
                            </Border>
                            <Label Grid.Column="3" Grid.Row="2" VerticalAlignment="Center"> MB </Label>
                            <!-- <Label Grid.Column="3" Grid.Row="2" VerticalAlignment="Center" HorizontalAlignment="Right">/ </Label> -->
                            <!-- <Label Grid.Column="4" Grid.Row="2" VerticalAlignment="Center" HorizontalAlignment="Left" Content="{Binding SelectedGpu.MemoryTotalMB, FallbackValue=00000}"/> -->
                            
                            
                            <!--POWER USAGE-->
                            <Label Grid.Column="0" Grid.Row="3" VerticalAlignment="Center" FontSize="12" HorizontalAlignment="Right"> POWER </Label>
                            
                            <Border Grid.Column="1" Grid.Row="3"  BorderBrush="{DynamicResource InfoBarsBorderBrush}" BorderThickness="2" Padding="3">
                                <ProgressBar  VerticalAlignment="Stretch"  Minimum="0" Value="{Binding SelectedGpu.GpuPowerUsage, FallbackValue=0}" Maximum="{Binding SelectedGpu.PowerLimitCurrentMw,FallbackValue=1000}"/>
                            </Border>
                            
                            <Border Grid.Column="2" Grid.Row="3" BorderBrush="{DynamicResource InfoBarsBorderBrush}" BorderThickness="2">
                                <Label  VerticalAlignment="Center" HorizontalAlignment="Right" Content="{Binding SelectedGpu.GpuPowerUsageWFormatted, FallbackValue=0000}"/>
                            </Border>
                            <Label Grid.Column="3" Grid.Row="3" VerticalAlignment="Center"> W </Label>
                            <!-- <Label Grid.Column="3" Grid.Row="3" VerticalAlignment="Center" HorizontalAlignment="Right">/ </Label> -->
                            <!-- <Label Grid.Column="4" Grid.Row="3" VerticalAlignment="Center" HorizontalAlignment="Left" Content="{Binding SelectedGpu.PowerLimitCurrentW, FallbackValue=00000}"/> -->
                            
                            <!--CORE TEMP-->
                            <Label Grid.Column="0" Grid.Row="4" VerticalAlignment="Center" FontSize="12" HorizontalAlignment="Right"> CORE TEMP </Label>
                            
                            <Border Grid.Column="1" Grid.Row="4"  BorderBrush="{DynamicResource InfoBarsBorderBrush}" BorderThickness="2" Padding="3">
                                <ProgressBar  VerticalAlignment="Stretch" Minimum="0" Maximum="{Binding SelectedGpu.TemperatureThresholdShutdown,FallbackValue=98}" Value="{Binding SelectedGpu.GpuTemperature,FallbackValue=0}"/>
                            </Border>
                            <Border Grid.Column="2" Grid.Row="4" BorderBrush="{DynamicResource InfoBarsBorderBrush}" BorderThickness="2">
                                <Label  VerticalAlignment="Center" HorizontalAlignment="Right" Content="{Binding SelectedGpu.GpuTemperature, FallbackValue=0000}" Foreground="{Binding SelectedGpu.TemperatureIndicatorColorBrush}" />
                            </Border>
                            <Label Grid.Column="3" Grid.Row="4" VerticalAlignment="Center" Foreground="{Binding SelectedGpu.TemperatureIndicatorColorBrush}"> °C </Label>
                            
                            <!--GPU USAGE-->
                            <Label Grid.Column="0" Grid.Row="5" VerticalAlignment="Center" FontSize="12" HorizontalAlignment="Right"> GPU USAGE </Label>
                            
                            <Border Grid.Column="1" Grid.Row="5" BorderBrush="{DynamicResource InfoBarsBorderBrush}" BorderThickness="2" Padding="3">
                                <ProgressBar  Minimum="0" Maximum="100" Value="{Binding SelectedGpu.UtilizationCore,FallbackValue=0}" VerticalAlignment="Stretch"/>
                            </Border>
                            <Border Grid.Column="2" Grid.Row="5" BorderBrush="{DynamicResource InfoBarsBorderBrush}" BorderThickness="2">
                                <Label  VerticalAlignment="Center" HorizontalAlignment="Right" Content="{Binding SelectedGpu.UtilizationCore, FallbackValue=000}" />
                            </Border>
                            <Label Grid.Column="3" Grid.Row="5" VerticalAlignment="Center"> % </Label>
                    
                        </Grid>
                        
                    </Border>
                
                    
                    <Border Grid.Column="3" Grid.RowSpan="4"
                            Grid.Row="1"
                            
                        BorderBrush="DimGray"
                        Background="{DynamicResource SectionBackgroundBrushDark}"
                        BorderThickness="2"
                        CornerRadius="20"
                        Padding="2"
                        
                        >
                    
                        <!--PROFILES MAIN STACKPANEL-->
                        <StackPanel Spacing="5">
                        
                            <Label VerticalAlignment="Stretch" HorizontalAlignment="Center" Content="PROFILES"/>
                            
                            <Border BorderBrush="DimGray" BorderThickness="2" CornerRadius="20" Background="{DynamicResource SectionBackgroundBrushLight}">
                                <StackPanel  Orientation="Horizontal" Spacing="3">
                                    <Label/>
                                    
                                    <Button VerticalAlignment="Center" FontSize="12" HorizontalAlignment="Right" Command="{Binding SaveStartupProfile}" CommandParameter="{Binding #CurrentSelectedProfileCombobox.SelectedItem}">
                                        
                                        <Image Height="12" Width="12"
                                               Source="avares://ssprea-nvidia-control/Assets/icons/save-icon.png"/>
                                        
                                        <ToolTip.Tip>
                                            <StackPanel>
                                                <TextBlock>Save selected profile as startup profile. This profile will be loaded on every startup with a systemd service.</TextBlock>
                                            </StackPanel>
                                        </ToolTip.Tip>
                                        
                                    </Button>
                                    <Label/>
                                    <CheckBox IsChecked="{Binding IsStartupProfileChecked}" VerticalAlignment="Top" FontSize="12" HorizontalAlignment="Stretch"> Startup: </CheckBox>
                                    <Label VerticalAlignment="Center" FontSize="12" HorizontalAlignment="Stretch" Content="{Binding SelectedStartupProfile.Name, FallbackValue=Disabled}"/>
                                    
                                </StackPanel>
                            </Border> 
                            
                            <Border BorderBrush="DimGray" BorderThickness="2" CornerRadius="20" Background="{DynamicResource SectionBackgroundBrushLight}">
                                <StackPanel  Spacing="3" Orientation="Horizontal">
                                    <Label/>
                                    <Button VerticalAlignment="Center" FontSize="12" HorizontalAlignment="Center" Command="{Binding SaveAutoApplyProfile}" CommandParameter="{Binding #CurrentSelectedProfileCombobox.SelectedItem}">
                                        <Image Height="12" Width="12"
                                               Source="avares://ssprea-nvidia-control/Assets/icons/save-icon.png"/>
                                        <ToolTip.Tip>
                                            <StackPanel>
                                                <TextBlock>Save selected profile as default. This profile will be loaded and applied when the GUI is opened. If the systemd service doesn't work for you, this option can also be used as an alternative startup profile by also setting the GUI to open at startup.</TextBlock>
                                            </StackPanel>
                                        </ToolTip.Tip>
                                        
                                    </Button>
                                    <Label/>
                                    <CheckBox VerticalAlignment="Top" FontSize="12" HorizontalAlignment="Stretch" IsChecked="{Binding IsAutoApplyProfileChecked}"> Default: </CheckBox>
                                    <Label VerticalAlignment="Center" FontSize="12" HorizontalAlignment="Stretch" Content="{Binding SelectedAutoApplyOcProfile.Name, FallbackValue=Disabled}"/>

                                    
                                </StackPanel>
                            </Border> 
                            
                                
                            
                            
                            
                            <ComboBox SelectedItem="{Binding SelectedOcProfile}"
                                      ItemsSource="{Binding OcProfilesList}" 
                                      x:Name="CurrentSelectedProfileCombobox"
                                      
                                      SelectedIndex="1"
                                      VerticalAlignment="Bottom" 
                                      HorizontalAlignment="Stretch"
                            >
                        
                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <Label Content="{Binding Name} " />
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                                
                            </ComboBox>
                            
                            
                            <DockPanel>
                                
                                <Button DockPanel.Dock="Left" Content="Load to tuner" Command="{Binding LoadSelectedOcProfileToTuner}" HorizontalAlignment="Center"/>
                                <Button DockPanel.Dock="Right" Content="Delete this profile" Command="{Binding DeleteOcProfile}" Background="#40E85F68" HorizontalAlignment="Center"/>
                                
                            </DockPanel>
                            
                            <DockPanel >
                                
                                <Button DockPanel.Dock="Right" CornerRadius="10" Content="Save" Command="{Binding SaveTempTunerSettingsToProfileAndUpdateFileAsync}" />
                                <TextBox MinHeight="0"   HorizontalAlignment="Stretch" Watermark="Type new profile name here" UseFloatingWatermark="False" BorderThickness="0" Text="{Binding TunerCurrentProfileName,FallbackValue=''}"></TextBox>

                            </DockPanel>
                            
                        </StackPanel>
                    
                    </Border>
                
                    
                    <Border Grid.Column="2"
                            Grid.Row="5"
                            Grid.ColumnSpan="3"
                            BorderThickness="6"
                            >
                        
                        <Border  DockPanel.Dock="Top" Padding="2" Background="{DynamicResource SmallSectionBackgroundBrushDark}" BorderBrush="OrangeRed" BorderThickness="4" CornerRadius="10" HorizontalAlignment="Center" VerticalAlignment="Top"
                        >
                        
                        <DockPanel 
                                
                                
                        >
                        
                            <Label DockPanel.Dock="Left" VerticalAlignment="Center">Select GPU: </Label>
                            <ComboBox SelectedItem="{Binding SelectedGpu}"
                                      ItemsSource="{Binding NvmlService.GpuList}" 
                                      SelectedIndex="1" VerticalAlignment="Center" HorizontalAlignment="Stretch"
                                      DockPanel.Dock="Right"
                                      >
                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <Label Content="{Binding Name} " />
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>
                                        
                        
                        </DockPanel>
                    </Border>
                    </Border>
                </Grid> 
                
                
            </Border>
            
            
            <!--BOTTOM PANEL-->
            <Panel Grid.Column="1" Grid.Row="2" >
                 
                <Border Background="{DynamicResource SectionBackgroundBrushDark}" BorderThickness="3" CornerRadius="20" BorderBrush="Gray" >
                    
                    <!--BOTTOM MENU-->
                    <Grid ColumnDefinitions="*,*,*">
                        
                        <!--INFO GRID-->
                            <Grid 
                            RowDefinitions="*,5*"
                            >
                        
                            <Label Grid.Row="0" HorizontalAlignment="Center" VerticalAlignment="Center" FontWeight="Bold" > INFO </Label>
                            
                            <!--INFO ITEMS STACK PANEL-->
                            <StackPanel Spacing="18" Grid.Row="1" Grid.Column="0"  HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                
                                <Border DockPanel.Dock="Top" Padding="2" Background="{DynamicResource SmallSectionBackgroundBrushLight}" BorderBrush="Gray" BorderThickness="4" CornerRadius="10" HorizontalAlignment="Center" VerticalAlignment="Top">
                                    <StackPanel 
                                        Orientation="Horizontal" 
                                
                                
                                    >
                        
                                        <Label VerticalAlignment="Center">Current PSTATE: </Label>
                                        <Label VerticalAlignment="Center" FontWeight="Bold" Content="{Binding SelectedGpu.GpuPState, FallbackValue=0000}"/>

                        
                                    </StackPanel>
                                </Border>
                                
                                <Border DockPanel.Dock="Top" Padding="2" Background="{DynamicResource SmallSectionBackgroundBrushDark}" BorderBrush="Gray" BorderThickness="4" CornerRadius="10" HorizontalAlignment="Center" VerticalAlignment="Top">
                                    <StackPanel 
                                        Orientation="Horizontal" 
                                
                                
                                    >
                        
                                        <Label VerticalAlignment="Center">Power Limit (W): Current: </Label>
                                        <Label VerticalAlignment="Center" FontWeight="Bold" Content="{Binding SelectedGpu.PowerLimitCurrentW, FallbackValue=0000}"/> 
                                        <Label VerticalAlignment="Center"> Min: </Label>
                                        <Label VerticalAlignment="Center" FontWeight="Bold" Content="{Binding SelectedGpu.PowerLimitMinW, FallbackValue=0000}"/> 
                                        <Label VerticalAlignment="Center" > Max: </Label>
                                        <Label VerticalAlignment="Center" FontWeight="Bold" Content="{Binding SelectedGpu.PowerLimitMaxW, FallbackValue=0000}"/> 

                        
                                    </StackPanel>
                                </Border>
                                
                                <Border DockPanel.Dock="Top" Padding="2" Background="{DynamicResource SmallSectionBackgroundBrushLight}" BorderBrush="Gray" BorderThickness="4" CornerRadius="10" HorizontalAlignment="Center" VerticalAlignment="Top">
                                    <StackPanel 
                                        Orientation="Horizontal" 
                                
                                
                                    >
                        
                                        <Label VerticalAlignment="Center">Temps (°C): Throttle: </Label>
                                        <Label VerticalAlignment="Center" FontWeight="Bold" Content="{Binding SelectedGpu.TemperatureThresholdThrottle, FallbackValue=00}"/> 
                                        <Label VerticalAlignment="Center"> Slowdown: </Label>
                                        <Label VerticalAlignment="Center" FontWeight="Bold" Content="{Binding SelectedGpu.TemperatureThresholdSlowdown,FallbackValue=00}"/> 
                                        <Label VerticalAlignment="Center" > Shutdown: </Label>
                                        <Label VerticalAlignment="Center" FontWeight="Bold" Content="{Binding SelectedGpu.TemperatureThresholdShutdown,FallbackValue=00}"/> 

                        
                                    </StackPanel>
                                </Border>
                                
                                <Border DockPanel.Dock="Top" Padding="2" Background="{DynamicResource SmallSectionBackgroundBrushDark}" BorderBrush="Gray" BorderThickness="4" CornerRadius="10" HorizontalAlignment="Center" VerticalAlignment="Top">
                                    <StackPanel 
                                        Orientation="Horizontal" 
                                
                                
                                    >
                        
                                        <Label VerticalAlignment="Center">Memory (MB): Free: </Label>
                                        <Label VerticalAlignment="Center" FontWeight="Bold" Content="{Binding SelectedGpu.MemoryFreeMBFormatted, FallbackValue=00000}"/> 
                                        <Label VerticalAlignment="Center"> out of: </Label>
                                        <Label VerticalAlignment="Center" FontWeight="Bold" Content="{Binding SelectedGpu.MemoryTotalMBFormatted,FallbackValue=00000}"/> 

                        
                                    </StackPanel>
                                </Border>
                                
                                <Border DockPanel.Dock="Top" Padding="2" Background="{DynamicResource SmallSectionBackgroundBrushLight}" BorderBrush="Gray" BorderThickness="4" CornerRadius="10"  HorizontalAlignment="Center" VerticalAlignment="Top">
                                    <StackPanel 
                                        Orientation="Horizontal" 
                                
                                
                                    >
                        
                                        <Label VerticalAlignment="Center">nVidia Driver Version:  </Label>
                                        <Label VerticalAlignment="Center" FontWeight="Bold" Content="{Binding CurrentNvidiaDriverVersion}"/> 

                        
                                    </StackPanel>
                                </Border>
                                
                                
                                
                                
                                
                                
                                
                                
                            </StackPanel>
                                
                        </Grid>
                        
                        <!--TUNER GRID-->
                        <Border Grid.Column="1" BorderBrush="Gray" BorderThickness="1" >
                            <Grid RowDefinitions="*,5*"
                                  Background="{DynamicResource SectionBackgroundBrushLight}">
                            
                                <Label Grid.Row="0" HorizontalAlignment="Center" VerticalAlignment="Center" FontWeight="Bold" > TUNER </Label>
                                
                                <!--TUNER ITEMS STACK PANEL-->
                                <StackPanel Spacing="20" Grid.Row="1" Grid.Column="0"  HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                    
                                    <Border DockPanel.Dock="Top" Padding="2" Background="{DynamicResource SmallSectionBackgroundBrushLight}" BorderBrush="Gray" BorderThickness="4" CornerRadius="10" HorizontalAlignment="Center" VerticalAlignment="Top">
                                        <StackPanel 
                                            Orientation="Horizontal" 
                                        >
                            
                                            <Label VerticalAlignment="Center">Core Offset: </Label>
                                            <Slider Height="35" VerticalAlignment="Top" HorizontalAlignment="Stretch" 
                                                    Minimum="0"
                                                    Maximum="1000"
                                                    Value="{Binding TunerCurrentCoreOffset}"
                                                    Width="200"
                                            />
                                            <Label VerticalAlignment="Center" FontWeight="Bold" Content="{Binding TunerCurrentCoreOffset,FallbackValue=0000}"/> 
                                            <Label VerticalAlignment="Center" FontWeight="Bold" Content="MHz"/> 
                                            

                            
                                        </StackPanel>
                                    </Border>
                                    
                                    <Border DockPanel.Dock="Top" Padding="2" Background="{DynamicResource SmallSectionBackgroundBrushDark}" BorderBrush="Gray" BorderThickness="4" CornerRadius="10" HorizontalAlignment="Center" VerticalAlignment="Top">
                                        <StackPanel 
                                            Orientation="Horizontal" 
                                    
                                    
                                        >
                            
                                            <StackPanel 
                                                Orientation="Horizontal" 
                                    
                                    
                                            >
                            
                                                <Label VerticalAlignment="Center">Mem. Offset: </Label>
                                                <Slider Height="35" VerticalAlignment="Top" HorizontalAlignment="Stretch"
                                                        Minimum="0"
                                                        Maximum="3000"
                                                        Value="{Binding TunerCurrentMemoryOffset}"
                                                        Width="200"
                                                />
                                                <Label VerticalAlignment="Center" FontWeight="Bold" Content="{Binding TunerCurrentMemoryOffset,FallbackValue=0000}"/> 
                                                <Label VerticalAlignment="Center" FontWeight="Bold" Content="MHz"/> 
                                                
                            
                                            </StackPanel>
                            
                                        </StackPanel>
                                    </Border>
                                    
                                    <Border DockPanel.Dock="Top" Padding="2" Background="{DynamicResource SmallSectionBackgroundBrushLight}" BorderBrush="Gray" BorderThickness="4" CornerRadius="10" HorizontalAlignment="Center" VerticalAlignment="Top">
                                        <StackPanel 
                                            Orientation="Horizontal" 
                                        >
                            
                                            <Label VerticalAlignment="Center">Power Limit: </Label>
                                            <Slider Height="35" VerticalAlignment="Top" HorizontalAlignment="Stretch"
                                                    Minimum="{Binding SelectedGpu.PowerLimitMinMw, FallbackValue=0}"
                                                    Maximum="{Binding SelectedGpu.PowerLimitMaxMw, FallbackValue=400}"
                                                    Value="{Binding TunerCurrentPowerLimitMw}"
                                                    Width="200"
                                                    />
                                            <Label VerticalAlignment="Center" FontWeight="Bold" Content="{Binding TunerCurrentPowerLimitW,FallbackValue=000}"/> 
                                            <Label VerticalAlignment="Center" FontWeight="Bold" Content="W"/> 

                            
                                        </StackPanel>
                                    </Border>
                                    
                                    <Border DockPanel.Dock="Top" Padding="2" Background="{DynamicResource SmallSectionBackgroundBrushDark}" BorderBrush="Gray" BorderThickness="4" CornerRadius="10"  HorizontalAlignment="Center" VerticalAlignment="Top">
                                        <StackPanel 
                                            Orientation="Horizontal" 
                                            Spacing="20"
                                    
                                    
                                        >
                            
                                            <Button CornerRadius="10" Content="Apply" Command="{Binding ApplyTempTunerSettings}"/>
                                            <Button CornerRadius="10" Content="Reset" Command="{Binding ResetTunerOptions}"/>
                                            

                            
                                        </StackPanel>
                                    </Border>
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                    
                                </StackPanel>
                                
                            </Grid>
                            
                        </Border>
                        
                        <!--FAN CURVE GRID-->
                        <Grid Grid.Column="2"
                            RowDefinitions="*,5*"
                            >
                            
                            <!-- <Grid.Background> -->
                            <!--      -->
                            <!--     <LinearGradientBrush StartPoint="0%,50%" EndPoint="100%,50%"> -->
                            <!--         <GradientStop Color="{DynamicResource SectionBackgroundColorLight}" Offset="0.0"/> -->
                            <!--         <GradientStop Color="{DynamicResource SectionBackgroundColorDark}" Offset="0.2"/> -->
                            <!--     </LinearGradientBrush> -->
                            <!--      -->
                            <!-- </Grid.Background> -->
                            
                            <Border Grid.Row="0" >
                                <Label  HorizontalAlignment="Center" VerticalAlignment="Center" FontWeight="Bold" > FAN CURVE </Label>
                            </Border>
                            <!--FAN CURVE ITEMS STACK PANEL-->
                            <StackPanel Spacing="3" Grid.Row="1" Grid.Column="0"  HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                
                                <lvc:CartesianChart MinHeight="169" MinWidth="150"
                                                    BorderThickness="0" Padding="0" Margin="0"
                                                    HorizontalAlignment="Stretch" VerticalAlignment="Stretch" 
                                                    Series="{Binding SelectedFanCurve.CurvePointsSeries}"
                                                    XAxes="{Binding FanCurveGraphXAxes}"
                                                    YAxes="{Binding FanCurveGraphYAxes}"
                                                    ZoomMode="X"
                                                    />
                                
                                <ComboBox HorizontalAlignment="Stretch"
                                          ItemsSource="{Binding FanCurvesList}"
                                          SelectedItem="{Binding SelectedFanCurve}">

                                    <ComboBox.ItemTemplate>
                                        <DataTemplate>
                                            <Label Content="{Binding Name}"/>
                                        </DataTemplate>
                                    </ComboBox.ItemTemplate>
                                </ComboBox>
                                
                                <Border DockPanel.Dock="Top" Padding="2" Background="#40969696" BorderBrush="Gray" BorderThickness="4" CornerRadius="10"  HorizontalAlignment="Center" VerticalAlignment="Top">
                                    <StackPanel 
                                        Orientation="Horizontal" 
                                        Spacing="15"
                                
                                
                                    >
                                        
                                        <Button Command="{Binding  OpenFanCurveEditorCommand}" Content="New"/>
                                        <Button Content="Edit"  Command="{Binding  OpenFanCurveEditorCommand}" CommandParameter="{Binding SelectedFanCurve}"/>
                                        <Button Content="Delete" Command="{Binding DeleteSelectedFanProfile}"/>
                                        <CheckBox Content="Enable" IsChecked="{Binding IsFanCurveIncludedInProfileChecked}" />
                                        

                        
                                    </StackPanel>
                                </Border>
                                
                                
                            </StackPanel>
                            
                            
                            
                        </Grid>
                    </Grid>
                    
                </Border>
            
            
            </Panel>
            
            <!--RIGHT PANEL-->
            
            <Border BorderThickness="20" Grid.Column="2" Grid.Row="1" Grid.RowSpan="2">
                <Border BorderBrush="Gray" BorderThickness="2" CornerRadius="20" Padding="15">
                    
                    <StackPanel Spacing="140" >
                        <Button CornerRadius="20" Command="{Binding OpenSettingsWindowCommand}">
                            <Image Source="avares://ssprea-nvidia-control/Assets/icons/gear-icon.png"/>
                            <ToolTip.Tip>
                                <StackPanel>
                                    <TextBlock>Application settings</TextBlock>
                                </StackPanel>
                            </ToolTip.Tip>
                        </Button>
                        <Button Command="{Binding ShowComingSoonPopupAsync}" CommandParameter="Extra GPU Info" CornerRadius="20">
                            <Image Source="avares://ssprea-nvidia-control/Assets/icons/info-icon.png"/>
                            <ToolTip.Tip>
                                <StackPanel>
                                    <TextBlock>Extra GPU Info</TextBlock>
                                    <TextBlock>COMING SOON!</TextBlock>
                                </StackPanel>
                            </ToolTip.Tip>
                        </Button>
                        <Button Command="{Binding ShowComingSoonPopupAsync}" CommandParameter="Usage graphs" CornerRadius="20">
                            <Image Source="avares://ssprea-nvidia-control/Assets/icons/graph-icon.png"/>
                            <ToolTip.Tip>
                                <StackPanel>
                                    <TextBlock>Usage graphs</TextBlock>
                                    <TextBlock>COMING SOON!</TextBlock>
                                </StackPanel>
                            </ToolTip.Tip>
                        </Button>
                        <Button CornerRadius="20" Command="{Binding OpenDefaultBrowserToUrl}" CommandParameter="https://github.com/ssprea/ssprea-nvidia-control/wiki">
                            <Image Source="avares://ssprea-nvidia-control/Assets/icons/help-icon.png"/>
                            <ToolTip.Tip>
                                <StackPanel>
                                    <TextBlock>Guide</TextBlock>
                                </StackPanel>
                            </ToolTip.Tip>
                        </Button>
                    </StackPanel>
                    
                </Border>
            </Border>
        </Grid>
    
    
    
    
    

</Window>
